{% extends 'core/dashboard_base.html' %}
{% load static %}

{% block title %}{{ quiz.title }}{% endblock %}

{% block dashboard_content %}
<div class="page-header">
    <a href="{% url 'quiz_list' %}" class="back-link">
        <i class="fas fa-arrow-left"></i> Back to Quizzes
    </a>
    <h1><i class="fas fa-question-circle"></i> {{ quiz.title }}</h1>
    <p>{{ quiz.description }}</p>
</div>

<div class="quiz-container">
    <form action="{% url 'quiz_submit' quiz.id %}" method="POST" id="quizForm">
        {% csrf_token %}
        
        <div class="questions-list">
            {% for question in questions %}
            <div class="question-card" data-question="{{ forloop.counter }}">
                <div class="question-number">Question {{ forloop.counter }} of {{ questions.count }}</div>
                <h3>{{ question.question_text }}</h3>
                
                <div class="options-list">
                    <label class="option">
                        <input type="radio" name="question_{{ question.id }}" value="a" required>
                        <span class="option-label">A</span>
                        <span class="option-text">{{ question.option_a }}</span>
                    </label>
                    <label class="option">
                        <input type="radio" name="question_{{ question.id }}" value="b">
                        <span class="option-label">B</span>
                        <span class="option-text">{{ question.option_b }}</span>
                    </label>
                    <label class="option">
                        <input type="radio" name="question_{{ question.id }}" value="c">
                        <span class="option-label">C</span>
                        <span class="option-text">{{ question.option_c }}</span>
                    </label>
                    <label class="option">
                        <input type="radio" name="question_{{ question.id }}" value="d">
                        <span class="option-label">D</span>
                        <span class="option-text">{{ question.option_d }}</span>
                    </label>
                </div>
            </div>
            {% empty %}
            <div class="no-questions">
                <p>No questions available for this quiz.</p>
            </div>
            {% endfor %}
        </div>
        
        {% if questions %}
        <div class="quiz-actions">
            <button type="submit" class="btn btn-primary btn-lg">
                <i class="fas fa-check"></i> Submit Quiz
            </button>
        </div>
        {% endif %}
    </form>
</div>

<script>
    document.querySelectorAll('.option').forEach(option => {
        option.addEventListener('click', function() {
            this.closest('.options-list').querySelectorAll('.option').forEach(o => o.classList.remove('selected'));
            this.classList.add('selected');
        });
    });
</script>
{% endblock %}
